{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nikhi/Projects/opensource/Onetech/templates/nextjs/ts/app-tw-firebase/src/lib/firebase.tsx"],"sourcesContent":["// app/lib/firebase.tsx\r\n// This file is responsible for Firebase authentication services.\r\n\r\n// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  getAuth,\r\n  signInWithEmailAndPassword,\r\n  signOut,\r\n} from \"firebase/auth\";\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\nconst auth = getAuth(app);\r\n\r\n// Export the auth object for use in other parts of the application\r\nexport { auth };\r\n// You can also export the app if needed\r\nexport { app };\r\n\r\n/**\r\n * Gets the current authenticated user.\r\n * @returns User | null - The current user or null if not authenticated.\r\n */\r\nexport const getCurrentUser = () => {\r\n  return auth.currentUser;\r\n};\r\n\r\n/**\r\n * Checks if a user is currently signed in.\r\n * @returns boolean - True if user is signed in, false otherwise.\r\n */\r\nexport const isUserSignedIn = () => {\r\n  return auth.currentUser !== null;\r\n};\r\n\r\n/**\r\n * Logs in a user with email and password.\r\n * @param email - The email of the user.\r\n * @param password - The password of the user.\r\n * @returns Promise<User> - The authenticated user object.\r\n */\r\nexport const fireSignIn = async (email: string, password: string) => {\r\n  try {\r\n    // Validate input\r\n    if (!email?.trim() || !password?.trim()) {\r\n      throw new Error(`Email and password are required`);\r\n    }\r\n\r\n    // Validate email format\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email.trim())) {\r\n      throw new Error(\"Please enter a valid email address\");\r\n    }\r\n\r\n    const userCredential = await signInWithEmailAndPassword(\r\n      auth,\r\n      email.trim(),\r\n      password.trim()\r\n    );\r\n\r\n    const user = userCredential.user;\r\n    console.log(\"User signed in successfully:\", user.uid);\r\n    return user;\r\n  } catch (error) {\r\n    const err = error as { code?: string; message?: string };\r\n    console.error(\"Error signing in:\", err.message);\r\n\r\n    // Provide more user-friendly error messages\r\n    if (err.code === \"auth/user-not-found\") {\r\n      throw new Error(\"No account found with this email address\");\r\n    } else if (err.code === \"auth/wrong-password\") {\r\n      throw new Error(\"Incorrect password\");\r\n    } else if (err.code === \"auth/invalid-email\") {\r\n      throw new Error(\"Invalid email address\");\r\n    } else if (err.code === \"auth/too-many-requests\") {\r\n      throw new Error(\"Too many failed attempts. Please try again later\");\r\n    }\r\n\r\n    throw new Error(`Login failed: ${err.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Signs up a new user with email and password.\r\n * @param email - The email of the user to sign up.\r\n * @param password - The password of the user to sign up.\r\n * @returns Promise<User> - The newly created user object.\r\n */\r\nexport const fireSignUp = async (email: string, password: string) => {\r\n  try {\r\n    // Validate input\r\n    if (!email?.trim() || !password?.trim()) {\r\n      throw new Error(\"Email and password are required\");\r\n    }\r\n\r\n    // Validate email format\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email.trim())) {\r\n      throw new Error(\"Please enter a valid email address\");\r\n    }\r\n\r\n    // Validate password strength\r\n    if (password.length < 6) {\r\n      throw new Error(\"Password must be at least 6 characters long\");\r\n    }\r\n\r\n    // Create a new user with email and password\r\n    const userCredential = await createUserWithEmailAndPassword(\r\n      auth,\r\n      email.trim(),\r\n      password.trim()\r\n    );\r\n\r\n    const user = userCredential.user;\r\n    console.log(\"User signed up successfully:\", user.uid);\r\n    return user;\r\n  } catch (error) {\r\n    const err = error as { code?: string; message?: string };\r\n    console.error(\"Error signing in:\", err.message);\r\n\r\n    // Provide more user-friendly error messages\r\n    if (err.code === \"auth/user-not-found\") {\r\n      throw new Error(\"No account found with this email address\");\r\n    } else if (err.code === \"auth/wrong-password\") {\r\n      throw new Error(\"Incorrect password\");\r\n    } else if (err.code === \"auth/invalid-email\") {\r\n      throw new Error(\"Invalid email address\");\r\n    } else if (err.code === \"auth/too-many-requests\") {\r\n      throw new Error(\"Too many failed attempts. Please try again later\");\r\n    }\r\n\r\n    throw new Error(`Login failed: ${err.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Logs out the current user.\r\n */\r\nexport const fireLogout = async () => {\r\n  try {\r\n    // Check if user is signed in\r\n    if (!auth.currentUser) {\r\n      throw new Error(\"No user is currently signed in\");\r\n    }\r\n\r\n    // Sign out the user\r\n    await signOut(auth);\r\n    console.log(\"User signed out successfully\");\r\n  } catch (error) {\r\n    const err = error as { message?: string };\r\n    console.error(\"Error signing out:\", err.message);\r\n    throw new Error(`Logout failed: ${err.message}`);\r\n  }\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nikhi/Projects/opensource/Onetech/templates/nextjs/ts/app-tw-firebase/src/context/FirebaseContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { auth } from \"@/lib/firebase\";\r\nimport { onAuthStateChanged, User } from \"firebase/auth\";\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  ReactNode,\r\n  useEffect,\r\n} from \"react\";\r\n\r\ninterface FireBaseContextType {\r\n  user: User | null;\r\n}\r\n\r\nconst FireBaseContext = createContext<FireBaseContextType | undefined>(\r\n  undefined\r\n);\r\n\r\nexport const FireBaseProvider = ({ children }: { children: ReactNode }) => {\r\n  const [user, setUser] = useState<User | null>(null); \r\n  const isProduction = process.env.NEXT_DEV?.toString() !== \"development\";\r\n  useEffect(() => {\r\n    if (isProduction) {\r\n      const unsub = onAuthStateChanged(auth, (user) => {\r\n        if (user) {\r\n          console.log(\"User is signed in:\", user);\r\n          setUser(user);\r\n        } else {\r\n          console.log(\"No user is signed in\");\r\n          setUser(null);\r\n        }\r\n      });\r\n      return () => unsub();\r\n    }\r\n  }, [isProduction]);\r\n\r\n  // // Debugging: Log user state changes\r\n  // useEffect(() => {\r\n  //   console.log(\"User state changed:\", user);\r\n  // }, [user]);\r\n  // // Debugging: Log auth object\r\n  // useEffect(() => {\r\n  //   console.log(\"Auth object:\", auth);\r\n  // }, []);\r\n  // // Debugging: Log auth state listener\r\n  return (\r\n    <FireBaseContext.Provider value={{ user }}>\r\n      {children}\r\n    </FireBaseContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useFireBase = () => {\r\n  const context = useContext(FireBaseContext);\r\n  if (!context)\r\n    throw new Error(\"useFireBase must be used within FireBaseProvider\");\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;AAsBuB;;AApBvB;AACA;AAAA;AACA;;;AAJA;;;;AAgBA,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAClC;AAGK,MAAM,mBAAmB;QAAC,EAAE,QAAQ,EAA2B;QAE/C;;IADrB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,eAAe,EAAA,wBAAA,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,QAAQ,cAApB,4CAAA,sBAAsB,QAAQ,QAAO;IAC1D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;sCAAE;YACR,IAAI,cAAc;gBAChB,MAAM,QAAQ,CAAA,GAAA,oNAAA,CAAA,qBAAkB,AAAD,EAAE,0HAAA,CAAA,OAAI;wDAAE,CAAC;wBACtC,IAAI,MAAM;4BACR,QAAQ,GAAG,CAAC,sBAAsB;4BAClC,QAAQ;wBACV,OAAO;4BACL,QAAQ,GAAG,CAAC;4BACZ,QAAQ;wBACV;oBACF;;gBACA;kDAAO,IAAM;;YACf;QACF;qCAAG;QAAC;KAAa;IAEjB,uCAAuC;IACvC,oBAAoB;IACpB,8CAA8C;IAC9C,cAAc;IACd,gCAAgC;IAChC,oBAAoB;IACpB,uCAAuC;IACvC,UAAU;IACV,wCAAwC;IACxC,qBACE,6LAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;QAAK;kBACrC;;;;;;AAGP;GAhCa;KAAA;AAkCN,MAAM,cAAc;;IACzB,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SACH,MAAM,IAAI,MAAM;IAClB,OAAO;AACT;IALa","debugId":null}}]
}